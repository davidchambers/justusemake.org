<html>
<head>
  <meta charset="utf-8">
  <title>Just Use Make</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Just Use Make</h1>
  <p>Here is a paragraph.</p>
  <pre><code class="language-make">COFFEE = node_modules/.bin/coffee
DOCTEST = node_modules/.bin/doctest --module commonjs
XYZ = node_modules/.bin/xyz --message X.Y.Z --tag X.Y.Z --repo git@github.com:davidchambers/orthogonal.git --script scripts/prepublish

SRC_IMAGES = <span class="group">$(<span class="function">shell</span> find src/svg -type f)</span>
SVG_IMAGES = <span class="group">$(<span class="function">patsubst</span> src/svg/%.coffee,lib/svg/%.svg,<span class="group">$(SRC_IMAGES)</span>)</span>
LIB = lib/orthogonal.js <span class="group">$(SVG_IMAGES)</span>

HAI = hello


<span class="targets"><span class="target special">.PHONY</span>:</span> all
<span class="targets"><span class="target">all</span>:</span> <span class="group">$(LIB)</span>

<span class="targets"><span class="target special">.PHONY</span>:</span> foo
<span class="targets"><span class="target">foo</span>:</span>
<span class="recipe">	echo <span class="string">'<span class="group">$(<span class="function">shell</span> echo <span class="string">'<span class="group">${HAI}</span>'</span>)</span>'</span></span>

<span class="targets"><span class="target">lib/%.js</span>:</span> src/%.coffee
<span class="recipe">	<span class="group">$(COFFEE)</span> --compile --output <span class="string">'<span class="group">$(@D)</span>'</span> -- <span class="string">'<span class="auto-var">$&lt;</span>'</span>
	<span class="string">'<span class="group">${Foo}</span> $$BAR'</span> <span class="string">"<span class="group">$(Foo)</span> $$BAR"</span></span>

<span class="comment"># Percent 2 F : %2F</span>
<span class="targets"><span class="target">lib/%.svg</span>:</span> src/%.coffee
<span class="recipe">	mkdir -p <span class="string">'<span class="group">$(@D)</span>'</span>
	<span class="comment"># comment</span>
	hello &lt; world
	echo <span class="string">'foo
# not a comment
bar'</span>
	<span class="group">$(COFFEE)</span> <span class="string">'<span class="auto-var">$&lt;</span>'</span> &gt;<span class="string">'<span class="auto-var">$@</span>'</span></span>


<span class="targets"><span class="target special">.PHONY</span>:</span> clean
<span class="targets"><span class="target">clean</span>:</span>
<span class="recipe">	rm -f -- <span class="group">$(LIB)</span></span>


<span class="targets"><span class="target special">.PHONY</span>:</span> release-major release-minor release-patch
<span class="targets"><span class="target">release-major</span>:</span> LEVEL = major
<span class="targets"><span class="target">release-minor</span>:</span> LEVEL = minor
<span class="targets"><span class="target">release-patch</span>:</span> LEVEL = patch

<span class="targets"><span class="target">release-major</span> <span class="target">release-minor</span> <span class="target">release-patch</span>:</span>
<span class="recipe">	<span class="silent">@</span><span class="group">$(XYZ)</span> --increment <span class="group">$(LEVEL)</span></span>


<span class="targets"><span class="target special">.PHONY</span>:</span> setup
<span class="targets"><span class="target">setup</span>:</span>
<span class="recipe">	npm install
	make clean
	git update-index --assume-unchanged lib/orthogonal.js</span>


<span class="targets"><span class="target special">.PHONY</span>:</span> test
<span class="targets"><span class="target">test</span>:</span>
<span class="recipe">	find src -name <span class="string">'*.coffee'</span> -not -path <span class="string">'src/svg/*'</span> -print0 | xargs -0 <span class="group">$(DOCTEST)</span></span>
</code></pre>
</body>
</html>
